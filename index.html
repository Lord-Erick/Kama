<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sutra ğŸ”¥</title>

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#ff4d6d">

<style>
:root{
  --primary:#ff4d6d;
  --secondary:#845ec2;
  --bg:linear-gradient(135deg,#1f1c2c,#928dab);
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,BlinkMacSystemFont;
  background:var(--bg);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}
.app{
  width:100%;
  max-width:420px;
  background:#fff;
  border-radius:20px;
  overflow:hidden;
  box-shadow:0 30px 60px rgba(0,0,0,.3);
  display:flex;
  flex-direction:column;
}
header{
  padding:20px;
  background:linear-gradient(135deg,var(--primary),var(--secondary));
  color:#fff;
  text-align:center;
}
header h1{margin:0;font-size:24px}
header p{margin:6px 0 0;opacity:.9}
.chat{
  flex:1;
  padding:15px;
  overflow-y:auto;
  background:#f5f6fa;
}
.msg{
  background:#fff;
  padding:12px 15px;
  border-radius:14px;
  margin-bottom:10px;
  max-width:85%;
  animation:fade .3s ease;
  box-shadow:0 5px 15px rgba(0,0,0,.05);
  border-left:4px solid var(--primary);
}
.msg img{
  width:100%;
  border-radius:12px;
  margin-top:10px;
}
.caption{
  margin-top:10px;
  font-weight:600;
  color:var(--secondary);
}
.controls{
  padding:12px;
  background:#fff;
  display:grid;
  gap:10px;
}
.controls.hidden{display:none}
button{
  padding:14px;
  border:none;
  border-radius:12px;
  font-size:15px;
  font-weight:600;
  cursor:pointer;
}
.primary{background:var(--primary);color:#fff}
.secondary{background:#eee}
.success{background:#4cd964;color:#fff}
.danger{background:#ff6b6b;color:#fff}
@keyframes fade{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:translateY(0)}
}
</style>
</head>

<body>

<div class="app">
<header>
  <h1>ğŸ”¥ Sutra</h1>
  <p>Jogo privado interativo</p>
</header>

<div id="chat" class="chat"></div>

<!-- CONTROLES -->
<div id="c-main" class="controls">
  <button class="primary" onclick="vamos()">ğŸ”¥ Vamos</button>
  <button class="secondary" onclick="talvez()">ğŸ¤” Talvez</button>
  <button class="danger" onclick="nop()">âŒ Nop</button>
</div>

<div id="c-yesno" class="controls hidden">
  <button class="success" onclick="sortear()">ğŸ Sortear posiÃ§Ã£o</button>
  <button class="danger" onclick="voltar()">âŒ NÃ£o</button>
</div>

<div id="c-after" class="controls hidden">
  <button class="primary" onclick="desafio()">ğŸ˜ˆ Desafio</button>
  <button class="secondary" onclick="continuar()">â¡ï¸ Continuar</button>
</div>

<div id="c-posicao" class="controls hidden">
  <button class="success" onclick="feito()">âœ… Conseguimos</button>
  <button class="danger" onclick="repetir()">ğŸ”„ NÃ£o deu</button>
</div>

</div>

<script>
/* ===============================
   DADOS
================================ */
const imagens = [
 // Imagens originais do Imgur (4)
 'https://i.imgur.com/RTH7Rp0.jpeg',
 'https://i.imgur.com/rna3grD.png',
 'https://i.imgur.com/9Dkrw5X.png',
 'https://i.imgur.com/iprHqoi.png',
 
 // Novas imagens do PostImage (28) - URLs diretas
 'https://i.postimg.cc/8jdrFQRm/f1.jpg',
 'https://i.postimg.cc/RN1n357P/f10.jpg',
 'https://i.postimg.cc/bs02Gcxm/f11.jpg',
 'https://i.postimg.cc/Vd9bSQqH/f12.jpg',
 'https://i.postimg.cc/WhmJDLGy/f13.jpg',
 'https://i.postimg.cc/8jdrFQR9/f14.jpg',
 'https://i.postimg.cc/Vd9bSQ9Q/f15.jpg',
 'https://i.postimg.cc/gwjwBxCF/f16.png',
 'https://i.postimg.cc/8FcFn72V/f17.png',
 'https://i.postimg.cc/R3h3bWkx/f18.png',
 'https://i.postimg.cc/cKCK5vp0/f19.png',
 'https://i.postimg.cc/06j6HzTy/f2.jpg',
 'https://i.postimg.cc/8FcFn725/f20.png',
 'https://i.postimg.cc/7CRCvx4D/f21.png',
 'https://i.postimg.cc/hJYJFSnn/f22.png',
 'https://i.postimg.cc/kVHVrnCJ/f23.png',
 'https://i.postimg.cc/XZPZMVWJ/f24.png',
 'https://i.postimg.cc/0646g8vM/f25.png',
 'https://i.postimg.cc/McLckWwv/f26.png',
 'https://i.postimg.cc/QBzBLXDK/f28.png',
 'https://i.postimg.cc/Z9Q9kTmd/f29.png',
 'https://i.postimg.cc/3yqyMKhG/f3.jpg',
 'https://i.postimg.cc/0646g8vm/f4.jpg',
 'https://i.postimg.cc/f3P34wsY/f5.jpg',
 'https://i.postimg.cc/HJNJGpm0/f6.jpg',
 'https://i.postimg.cc/jW1WVsT4/f7.jpg',
 'https://i.postimg.cc/LqWqdHSV/f8.jpg',
 'https://i.postimg.cc/R6nW4jCJ/f9.jpg'
];

const legendas = [
 "ğŸ”¥ ComeÃ§ando bemâ€¦",
 "ğŸ˜ˆ Essa prometeâ€¦",
 "ğŸ’‹ Curta o momentoâ€¦",
 "ğŸ”¥ Sem pressaâ€¦",
 "ğŸ­ VocÃª ganhou uma surpresa especial!",
 "ğŸ‰ ParabÃ©ns! Essa Ã© a sua sorte do dia!",
 "ğŸ’¥ BOOM! VocÃª acertou na mosca!",
 "ğŸŒŸ Sorte grande! Curta sua recompensa!",
 "ğŸ”¥ Essa imagem foi feita para vocÃª!",
 "ğŸ˜ Essa vai ser interessanteâ€¦",
 "ğŸ’• Aproveite cada instanteâ€¦",
 "âœ¨ Magia acontecendoâ€¦",
 "ğŸŒ™ Hora de se conectarâ€¦",
 "âš¡ Energia intensaâ€¦",
 "ğŸŒ¹ RomÃ¢ntico e ousadoâ€¦",
 "ğŸ’« Deixe-se levarâ€¦",
 "ğŸ¯ Acertou em cheio!",
 "ğŸŒŠ Fluindo naturalmenteâ€¦",
 "ğŸŒ¸ Doce e provocanteâ€¦",
 "ğŸ¦‹ Liberte-seâ€¦",
 "ğŸŒŒ Noite de descobertasâ€¦",
 "ğŸ· Delicie-seâ€¦",
 "ğŸª Circo de sensaÃ§Ãµesâ€¦",
 "ğŸŒ‹ ExplosÃ£o de prazerâ€¦",
 "ğŸ•¯ï¸ Luz na escuridÃ£oâ€¦",
 "ğŸ¶ Sintonia perfeitaâ€¦",
 "ğŸ§© PeÃ§as se encaixandoâ€¦",
 "ğŸŒ… Novo comeÃ§oâ€¦",
 "ğŸŒ€ VÃ³rtice de sensaÃ§Ãµesâ€¦",
 "ğŸŒˆ Arco-Ã­ris de emoÃ§Ãµesâ€¦",
 "ğŸª Viagem intergalÃ¡cticaâ€¦",
 "ğŸ‘‘ VocÃª Ã© o rei/rainha!"
];

const desafios=[
 "ğŸ˜ˆ Segurem a posiÃ§Ã£o por 10 segundos",
 "ğŸ”¥ Um beijo lento antes de continuar",
 "ğŸ’‹ Troquem os papÃ©is por 30 segundos",
 "ğŸ˜ Olho no olho atÃ© alguÃ©m rir",
 "ğŸ”¥ Sem mÃ£os por 15 segundos",
 "ğŸ’¦ Sussurre algo proibido"
];

// VariÃ¡veis para controle
let imagensDisponiveis = [...imagens];
let imagensSorteadas = [];
let ultimoSorteio = null;

const chat=document.getElementById("chat");

/* ===============================
   FUNÃ‡Ã•ES
================================ */
function msg(html){
  const d=document.createElement("div");
  d.className="msg";
  d.innerHTML=html;
  chat.appendChild(d);
  chat.scrollTop=chat.scrollHeight;
}

function show(id){
  document.querySelectorAll(".controls")
    .forEach(c=>c.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}

/* ===============================
   SORTEIO MELHORADO
================================ */
function sortear(){
  // Se jÃ¡ sortearam todas as imagens, reinicia
  if(imagensDisponiveis.length === 0){
    imagensDisponiveis = [...imagens];
    imagensSorteadas = [];
    msg("ğŸ”„ Todas as imagens foram sorteadas! Reiniciando...");
  }
  
  // Sorteia uma imagem aleatÃ³ria das disponÃ­veis
  const indice = Math.floor(Math.random() * imagensDisponiveis.length);
  const imagemSorteada = imagensDisponiveis[indice];
  
  // Remove da lista de disponÃ­veis e adiciona Ã s sorteadas
  imagensDisponiveis.splice(indice, 1);
  imagensSorteadas.push(imagemSorteada);
  ultimoSorteio = imagemSorteada;
  
  // Encontra o Ã­ndice da imagem no array original para a legenda
  const indiceOriginal = imagens.indexOf(imagemSorteada);
  
  // Seleciona uma legenda (usa o Ã­ndice original ou aleatÃ³rio se maior que o array)
  let legenda;
  if(indiceOriginal < legendas.length){
    legenda = legendas[indiceOriginal];
  }else{
    // Se nÃ£o hÃ¡ legenda especÃ­fica, escolhe uma aleatÃ³ria
    legenda = legendas[Math.floor(Math.random() * legendas.length)];
  }
  
  // Mostra a imagem com legenda
  msg(`<img src="${imagemSorteada}" alt="PosiÃ§Ã£o sorteada"><div class="caption">${legenda}</div>`);
  
  // Atualiza contador no console (para debug)
  console.log(`Imagens sorteadas: ${imagensSorteadas.length}/${imagens.length}`);
  console.log(`Imagens disponÃ­veis: ${imagensDisponiveis.length}`);
  
  show("c-after");
}

function repetir(){
  // Se o usuÃ¡rio quer repetir, a imagem atual volta para disponÃ­veis
  if(ultimoSorteio && !imagensDisponiveis.includes(ultimoSorteio)){
    imagensDisponiveis.push(ultimoSorteio);
    const index = imagensSorteadas.indexOf(ultimoSorteio);
    if(index > -1){
      imagensSorteadas.splice(index, 1);
    }
  }
  msg("ğŸ”¥ EntÃ£o vamos tentar outraâ€¦");
  show("c-yesno");
}

function feito(){
  // MantÃ©m a imagem como sorteada (nÃ£o volta para disponÃ­veis)
  msg("ğŸ˜ˆ Muito bemâ€¦ quer mais?");
  show("c-main");
}

/* ===============================
   FLUXO
================================ */
function vamos(){
  msg("ğŸ”¥ Interessanteâ€¦ quer tentar o sorteio?");
  show("c-yesno");
}

function talvez(){
  msg("ğŸ¤” Hmmmâ€¦ ainda dÃ¡ tempo de decidir.");
}

function nop(){
  msg("ğŸ˜¢ Tudo bemâ€¦ fico por aqui.");
}

function voltar(){
  show("c-main");
}

function desafio(){
  const d=desafios[Math.floor(Math.random()*desafios.length)];
  msg(`<b>ğŸ”¥ Desafio:</b><br>${d}`);
  show("c-posicao");
}

function continuar(){
  msg("ğŸ˜ Quer tentar outra?");
  show("c-yesno");
}

/* ===============================
   INIT
================================ */
msg("ğŸ‰ Bem-vindoâ€¦ toque em um botÃ£o para comeÃ§ar.");

/* ===============================
   PWA - SERVICE WORKER
================================ */
if("serviceWorker" in navigator){
  navigator.serviceWorker.register("sw.js");
}
</script>

</body>
</html>
